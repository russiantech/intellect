<!DOCTYPE html>
<html lang="en">

<head>
    <title>{% block title %} Sign In . Russsian Developers {% endblock title %}</title>
    {% include('incs/metas.html') %}
</head>

<body class="h-100">
    <div id="root" class="h-100">
        <div class="fixed-background"></div>
        <div class="container-fluid p-0 h-100 position-relative">
            <div class="row g-0 h-100">
                <div class="offset-0 col-12 d-none d-lg-flex offset-md-1 col-lg h-lg-100">

                    <div class="min-h-100 d-flex align-items-center">
                        <div class="w-100 w-lg-75 w-xxl-50">
                            <div>
                                <div class="mb-5">
                                    <h5 class="display-3 text-white">Intellect</h5>
                                    <div class="btn-group mb-0">
                                        <button class="btn btn-outline-primary btn-sm rounded-xl dropdown-toggle"
                                            type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                                            aria-expanded="false">
                                            Russian Developers Program
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-sm">
                                            <li>
                                                <a class="dropdown-item" target="_blank"
                                                    href="{{url_for('main.index')}}">Coding Courses</a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" target="_blank"
                                                    href="{{url_for('main.us')}}">About Us</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <p class="h6 text-white lh-1-5 mb-5">

                                    Building a future where learning fits seamlessly into your everyday life.
                                    Let's Mpower busy individuals to acquire skills on their own terms.
                                </p>
                                <div class="mb-5">
                                    <a class="btn btn-lg btn-outline-white" href="{{url_for('main.us')}}">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto h-100 pb-4 px-4 pt-0 p-lg-0">
                    <div
                        class="sw-lg-70 min-h-100 bg-foreground d-flex justify-content-center align-items-center shadow-deep py-5 full-page-content-right-border">

                        <div class="sw-lg-50 px-5">

                            <!--  -->
                            <div class="d-flex align-items-center border-bottom border-separator-light pb-3">
                                <div class="row g-0 w-100">
                                    <div class="col-auto">
                                        <div class="sw-5 me-3">
                                            <a href="{{url_for('main.index')}}">
                                                <img src="./static/img/favicon/favicon.svg" class="img-fluid rounded-xl"
                                                    alt="thumb">
                                            </a>
                                            <!-- <div class="logo-default"></div> -->
                                        </div>
                                    </div>
                                    <div class="col pe-3">
                                        <style>
                                            .h2 {
                                                font-size: 2.65 !important;
                                            }
                                        </style>
                                        <div class="mb-0 lh-sm h2">Intellect</div>
                                    </div>
                                </div>
                            </div>
                            <!--  -->

                            <!-- <div class="sh-11"> <a href="{{url_for('main.index')}}"><div class="logo-default"></div></a> </div> -->

                            <div class="mb-5">
                                <p class="mb-6">Techa empowers people & powers businesseses</p>
                            </div>

                            <div>
                                <form id="auth_form" class="tooltip-end-bottom" method="post" action="./auth">
                                    <h5 class="text-danger"> {% include('incs/alerts.html') %}</h5>

                                    <div class="mb-3 filled form-group tooltip-end-top">
                                        <i data-acorn-icon="email" class="text-primary" data-acorn-size="20"></i>
                                        <input class="form-control" id="username" name="username"
                                            placeholder="username or email or phone " required="" type="text" value="">
                                    </div>

                                    <div class="mb-3 filled form-group tooltip-end-top">
                                        <i data-acorn-icon="lock-off" class="text-primary" data-acorn-size="20"></i>
                                        <input class="form-control pe-7" id="password" name="password"
                                            placeholder="password" required="" type="password" value="">

                                        <a class="text-small position-absolute t-3 e-3"
                                            href="{{url_for('auth_api.forgot')}}">Forgot?</a>
                                    </div>

                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="remember" name="remember">
                                        <label class="form-check-label" for="remember">Remember Me </label>
                                    </div>

                                    <div
                                        class="card-footer border-0 pt-0 d-flex justify-content-end align-items-center">
                                        <div>
                                            <button id="submit" class="btn btn-icon btn-icon-end btn-primary w-50"
                                                type="submit">
                                                <span>Click to sign-in</span>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                    viewBox="0 0 20 20" fill="none" stroke="currentColor"
                                                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                                                    class="acorn-icons acorn-icons-chevron-right undefined">
                                                    <path
                                                        d="M7 4L12.6464 9.64645C12.8417 9.84171 12.8417 10.1583 12.6464 10.3536L7 16">
                                                    </path>
                                                </svg>
                                                or use:</button>
                                        </div>
                                    </div>

                                    <!--  -->
                                    <div role="group" class="btn-group mb-3 w-100">
                                        <!-- Google Button -->
                                        <a href="{{ url_for('auth_api.oauth2_authorize', provider='google') }}"
                                            class="btn btn-outline-primary" role="button">
                                            Google
                                        </a>

                                        <!-- Facebook Button -->
                                        <a href="{{ url_for('auth_api.oauth2_authorize', provider='facebook') }}"
                                            class="btn btn-primary disabled" role="button">
                                            Facebook
                                        </a>

                                        <!-- LinkedIn Button -->
                                        <a href="{{ url_for('auth_api.oauth2_authorize', provider='linkedin') }}"
                                            class="btn btn-outline-primary disabled {{ 'disabled' if disabled_condition else '' }}"
                                            role="button">
                                            LinkedIn
                                        </a>
                                    </div>
                                    <div class="mb-3 filled form-group tooltip-end-top">
                                        <label class="form-check-label" for="create-account">
                                            No account yet?
                                            <a href="{{url_for('auth_api.signup')}}">Create a free account</a>
                                            .
                                        </label>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include "incs/response_modal.html" %}

    <script src="static/js/vendor/jquery-3.5.1.min.js"></script>
    <script src="static/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="static/js/vendor/OverlayScrollbars.min.js"></script>
    <script src="static/js/vendor/autoComplete.min.js"></script>
    <script src="static/js/vendor/clamp.min.js"></script>
    <script src="static/icon/acorn-icons.js"></script>
    <script src="static/icon/acorn-icons-interface.js"></script>
    <script src="static/js/vendor/jquery.validate/jquery.validate.min.js"></script>
    <script src="static/js/vendor/jquery.validate/additional-methods.min.js"></script>
    <script src="static/js/base/helpers.js"></script>
    <script src="static/js/base/globals.js"></script>
    <script src="static/js/base/nav.js"></script>
    <script src="static/js/base/search.js"></script>
    <script src="static/js/base/settings.js"></script>
    <script src="static/js/pages/auth.register.js"></script>
    <script src="static/js/common.js"></script>
    <script src="static/js/scripts.js"></script>

    <script>
        function response_modal(message) {
            document.getElementById('response_text').innerText = message;
            console.log(message)
            $('#response_modal').modal('show');
        }

        $(document).ready(function () {
            $('#auth_form').on('submit', function (event) {
                event.preventDefault();
                //   console.log( $(this).attr('action'), $(this).attr('method') );
                $.ajax({
                    url: $(this).attr('action'),
                    method: $(this).attr('method'),
                    contentType: 'application/json',  // Set the content type to application/json
                    data: JSON.stringify({
                        username: $('#username').val(),
                        password: $('#password').val(),
                        remember: $('#remember').is(':checked')
                    }),
                    success: function (response) {
                        // console.log(response)
                        if (response.success) {
                            response_modal(response.message || 'Successful');

                        } else {
                            // response_modal(JSON.stringify(response));
                            response_modal(response.error || 'An error occurred.');
                        }

                        if (response.redirect) {
                            window.location.href = response.redirect;
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        response_modal(errorThrown || 'An unexpected error occurred.');
                    }
                });
            });
        });
    </script>

</body>

</html>